<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MasterIT</title>
</head>
<body>
    <h1>MasterIT</h1>
    <button id="authorize_button" style="display: none;">Authorize</button>
    <div id="content" style="display: none;">
        <h2>Classes</h2>
        <ul id="classes_list"></ul>
    </div>

    <script>
        const CLIENT_ID = 'YOUR_CLIENT_ID.apps.googleusercontent.com';
        const SCOPES = 'https://www.googleapis.com/auth/classroom.courses.readonly';

        function handleClientLoad() {
            gapi.load('client:auth2', initClient);
        }

        function initClient() {
            gapi.client.init({
                clientId: CLIENT_ID,
                scope: SCOPES,
                discoveryDocs: ['https://classroom.googleapis.com/$discovery/rest?version=v1']
            }).then(function () {
                // Listen for sign-in state changes.
                gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

                // Handle the initial sign-in state.
                updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
                document.getElementById('authorize_button').onclick = handleAuthClick;
            });
        }

        function updateSigninStatus(isSignedIn) {
            if (isSignedIn) {
                document.getElementById('authorize_button').style.display = 'none';
                document.getElementById('content').style.display = 'block';
                listCourses();
            } else {
                document.getElementById('authorize_button').style.display = 'block';
                document.getElementById('content').style.display = 'none';
            }
        }

        function handleAuthClick(event) {
            gapi.auth2.getAuthInstance().signIn();
        }

        function listCourses() {
            gapi.client.classroom.courses.list({
                pageSize: 10
            }).then(function(response) {
                const courses = response.result.courses;
                appendCourses(courses);
            });
        }

        function appendCourses(courses) {
            const coursesList = document.getElementById('classes_list');
            courses.forEach(function(course) {
                const li = document.createElement('li');
                li.appendChild(document.createTextNode(course.name));
                coursesList.appendChild(li);
            });
        }
    </script>

    <script src="https://apis.google.com/js/api.js?onload=handleClientLoad"></script>
</body>
</html>
